---
import { Image } from 'astro:assets';
import abstractEnvelope from "../../assets/abstract-envelope.svg";
import { getEntry } from 'astro:content';
import HeroSectionAnimator from '../vue/animations/HeroSectionAnimator.vue';
import { siGithub, siFacebook } from 'simple-icons';

const personalInfo = await getEntry('info', 'personal');
if (!personalInfo) {
    throw new Error('Personal information not found');
}
const { name, status, location, goal, currentFocus, motto } = personalInfo.data;
---

<HeroSectionAnimator client:load>
<section
    class="hero-section relative min-h-screen flex items-center justify-center overflow-hidden bg-onyx"
>
    <!-- Background SVG -->
    <div class="absolute inset-0">
        <Image
            src={abstractEnvelope}
            alt=""
            class="w-full h-full object-cover"
            loading="eager"
            width={1920}
            height={1080}
            quality={90}
        />
    </div>

    <!-- Gradient Overlay -->
    <div class="absolute inset-0 bg-gradient-to-b from-onyx/50 via-transparent to-hooker-green-900/60"></div>

    <!-- Floating Geometric Shapes -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <div class="floating-shape shape-1"></div>
        <div class="floating-shape shape-2"></div>
        <div class="floating-shape shape-3"></div>
        <div class="floating-shape shape-4"></div>
        <div class="floating-shape shape-5"></div>
    </div>

    <!-- Main Content -->
    <div class="relative z-10 max-w-7xl mx-auto px-6 py-20 mt-16">
        <div class="grid md:grid-cols-2 gap-12 items-center">
            <!-- Left Column - Text Content -->
            <div class="text-left space-y-6 hero-content">
                <h1 class="text-5xl md:text-7xl lg:text-8xl font-bold leading-tight">
                    <span class="block text-celadon-800 mb-2">Hello, I'm</span>
                    <span class="block bg-gradient-to-r from-emerald via-aquamarine to-celadon bg-clip-text text-transparent">
                        {name.split(' ')[0]} {name.split(' ')[1]}
                    </span>
                    <span class="block bg-gradient-to-r from-celadon via-emerald to-aquamarine bg-clip-text text-transparent">
                        {name.split(' ')[2]}
                    </span>
                </h1>

                <div class="hero-subtitle flex items-center gap-3 text-2xl md:text-3xl text-celadon-700">
                    <span>I'm a</span>
                    <span class="typing-text font-semibold text-aquamarine"></span>
                </div>

                <div class="hero-location flex items-center gap-3 text-lg md:text-xl text-celadon-800">
                    <svg class="w-5 h-5 text-aquamarine" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    <span>{location}</span>
                </div>

                <p class="hero-description text-lg md:text-xl text-celadon-800 max-w-xl leading-relaxed">
                    {goal}. Currently focusing on <span class="text-aquamarine font-semibold">{currentFocus.join(', ')}</span>.
                </p>

                <div class="hero-buttons flex flex-wrap gap-4 pt-6">
                    <a
                        href="#projects"
                        class="group px-8 py-4 bg-gradient-to-r from-aquamarine to-emerald text-onyx font-semibold rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-2xl hover:shadow-aquamarine/30 relative overflow-hidden"
                    >
                        <span class="relative z-10">View My Work</span>
                        <div class="absolute inset-0 bg-gradient-to-r from-emerald to-aquamarine opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    </a>
                    <a
                        href="#contact"
                        class="px-8 py-4 bg-transparent border-2 border-celadon text-celadon font-semibold rounded-lg hover:bg-celadon hover:text-onyx transition-all duration-300 transform hover:scale-105 relative overflow-hidden group"
                    >
                        <span class="relative z-10">Get In Touch</span>
                    </a>
                </div>

                <!-- Social Links -->
                <div class="hero-social flex gap-4 pt-4">
                    <a href="https://github.com/Cezzyy" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="GitHub Profile">
                        <svg class="w-6 h-6" fill="currentColor" role="img" viewBox="0 0 24 24">
                            <path d={siGithub.path} />
                        </svg>
                    </a>
                    <a href="https://www.linkedin.com/in/john-cez-casupanan-07196027b/" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="LinkedIn Profile">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                        </svg>
                    </a>
                    <a href="https://www.facebook.com/john.cez.casupanan04" target="_blank" rel="noopener noreferrer" class="social-icon" aria-label="Facebook Profile">
                        <svg class="w-6 h-6" fill="currentColor" role="img" viewBox="0 0 24 24">
                            <path d={siFacebook.path} />
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Right Column - Code Editor -->
            <div class="hidden md:flex items-center justify-center hero-visual animate-fade-in-delay-6">
                <div class="code-editor w-full max-w-lg">
                    <!-- Editor Header -->
                    <div class="editor-header flex items-center justify-between px-4 py-3 bg-black/90 rounded-t-xl border-b border-celadon/10">
                        <div class="flex items-center gap-2">
                            <div class="w-3 h-3 rounded-full bg-emerald animate-pulse-slow"></div>
                            <div class="w-3 h-3 rounded-full bg-aquamarine animate-pulse-slow" style="animation-delay: 0.2s;"></div>
                            <div class="w-3 h-3 rounded-full bg-celadon animate-pulse-slow" style="animation-delay: 0.4s;"></div>
                        </div>
                        <div class="flex items-center gap-2 text-celadon-700 text-sm font-mono">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                            </svg>
                            <span>personal.ts</span>
                        </div>
                    </div>

                    <!-- Editor Content -->
                    <div class="editor-content bg-black p-6 rounded-b-xl font-mono text-sm overflow-hidden relative">
                        <!-- Line Numbers -->
                        <div class="flex gap-4">
                            <div class="line-numbers text-celadon-600 select-none">
                                <div class="typing-line">1</div>
                                <div class="typing-line">2</div>
                                <div class="typing-line">3</div>
                                <div class="typing-line">4</div>
                                <div class="typing-line">5</div>
                                <div class="typing-line">6</div>
                                <div class="typing-line">7</div>
                                <div class="typing-line">8</div>
                                <div class="typing-line">9</div>
                                <div class="typing-line">10</div>
                                <div class="typing-line">11</div>
                                <div class="typing-line">12</div>
                                <div class="typing-line">13</div>
                            </div>

                            <!-- Code Content -->
                            <div class="code-content flex-1 text-celadon-900">
                                <div class="typing-line"><span class="text-emerald">const</span> <span class="text-aquamarine">developer</span> = &#123;</div>
                                <div class="typing-line pl-4"><span class="text-celadon-700">name:</span> <span class="text-celadon">"{name}"</span>,</div>
                                <div class="typing-line pl-4"><span class="text-celadon-700">status:</span> <span class="text-celadon">"{status}"</span>,</div>
                                <div class="typing-line pl-4"><span class="text-celadon-700">location:</span> <span class="text-celadon">"{location}"</span>,</div>
                                <div class="typing-line pl-4"><span class="text-celadon-700">goal:</span> <span class="text-celadon">"{goal}"</span>,</div>
                                <div class="typing-line pl-4"><span class="text-celadon-700">focus:</span> [</div>
                                {currentFocus.map((tech, index) => (
                                    <div class="typing-line pl-8">
                                        <span class="text-celadon">"{tech}"</span>{index < currentFocus.length - 1 ? ',' : ''}
                                    </div>
                                ))}
                                <div class="typing-line pl-4">],</div>
                                <div class="typing-line pl-4"><span class="text-celadon-700">motto:</span> <span class="text-celadon">"{motto.slice(0, 40)}..."</span></div>
                                <div class="typing-line">&#125;;</div>
                            </div>
                        </div>

                        <!-- Cursor -->
                        <div class="cursor"></div>
                    </div>

                    <!-- Editor Footer -->
                    <div class="editor-footer flex items-center justify-between px-4 py-2 bg-black/80 rounded-b-lg text-xs font-mono text-celadon-700 border-t border-celadon/10">
                        <div class="flex items-center gap-4">
                            <span>TypeScript</span>
                            <span>UTF-8</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-2 h-2 rounded-full bg-emerald animate-pulse"></div>
                            <span>Ready</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="scroll-indicator absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce">
        <div class="flex flex-col items-center gap-2">
            <span class="text-aquamarine text-sm">Scroll Down</span>
            <svg
                class="w-6 h-6 text-aquamarine"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
            </svg>
        </div>
    </div>
</section>
</HeroSectionAnimator>

<style>


    /* Code Editor Styles */
    .code-editor {
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        border: 1px solid rgba(174, 220, 192, 0.1);
        border-radius: 0.75rem;
        overflow: hidden;
    }

    .typing-line {
        opacity: 0;
        transform: translateX(-10px);
        line-height: 1.8;
    }

    .cursor {
        position: absolute;
        bottom: 1.5rem;
        right: 1.5rem;
        width: 8px;
        height: 16px;
        background: #38e4ae;
        animation: blink-cursor 1s infinite;
    }

    @keyframes blink-cursor {
        0%, 50% { opacity: 1; }
        51%, 100% { opacity: 0; }
    }

    @keyframes pulse-slow {
        0%, 100% {
            opacity: 0.3;
            transform: scale(1);
        }
        50% {
            opacity: 1;
            transform: scale(1.2);
        }
    }

    .animate-pulse-slow {
        animation: pulse-slow 3s ease-in-out infinite;
    }

    /* Floating Shapes */
    .floating-shape {
        position: absolute;
        background: linear-gradient(135deg, rgba(56, 228, 174, 0.1), rgba(123, 211, 137, 0.1));
        border-radius: 50%;
        animation: float 20s infinite ease-in-out;
        opacity: 0;
        transform: scale(0.8);
    }

    .shape-1 {
        width: 300px;
        height: 300px;
        top: 10%;
        left: 5%;
        animation-delay: 0s;
    }

    .shape-2 {
        width: 200px;
        height: 200px;
        top: 60%;
        right: 10%;
        animation-delay: 2s;
    }

    .shape-3 {
        width: 150px;
        height: 150px;
        bottom: 20%;
        left: 15%;
        animation-delay: 4s;
    }

    .shape-4 {
        width: 250px;
        height: 250px;
        top: 30%;
        right: 20%;
        animation-delay: 1s;
    }

    .shape-5 {
        width: 180px;
        height: 180px;
        bottom: 10%;
        right: 5%;
        animation-delay: 3s;
    }

    @keyframes float {
        0%, 100% {
            transform: translateY(0) rotate(0deg);
        }
        50% {
            transform: translateY(-30px) rotate(180deg);
        }
    }

    /* Typing Cursor for roles */
    .typing-text::after {
        content: '|';
        animation: blink 1s infinite;
    }

    @keyframes blink {
        0%, 50% { opacity: 1; }
        51%, 100% { opacity: 0; }
    }

    /* Social Icons */
    .social-icon {
        width: 48px;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 12px;
        background: rgba(96, 116, 102, 0.2);
        border: 1px solid rgba(174, 220, 192, 0.2);
        color: #aedcc0;
        transition: all 0.3s ease;
    }

    .social-icon:hover {
        background: linear-gradient(135deg, #38e4ae, #7bd389);
        color: #343e3d;
        transform: translateY(-4px);
        box-shadow: 0 8px 16px rgba(56, 228, 174, 0.3);
    }

    /* Initial states for GSAP animations */
    .hero-content h1,
    .hero-subtitle,
    .hero-location,
    .hero-description,
    .hero-buttons,
    .hero-social {
        opacity: 0;
        transform: translateY(30px);
    }

    .hero-visual {
        opacity: 0;
        transform: scale(0.9);
    }

    .scroll-indicator {
        opacity: 0;
        transform: translateY(-20px) translateX(-50%);
    }

</style>
